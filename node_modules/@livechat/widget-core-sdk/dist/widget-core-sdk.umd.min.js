!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).LiveChat={})}(this,function(_){function M(t,n){G.call(i,function(){var e=n.value,r=xe(n);if(r&&(r=re(function(){he?c.emit("unhandledRejection",e,t):je(de,t,e)}),n.rejection=he||xe(n)?qe:ye,r.error))throw r.value})}function C(e,r){G.call(i,function(){he?c.emit("rejectionHandled",e):je(ve,e,r.value)})}var F,N,$,e=require("../internals/object-assign"),e=(require("../internals/export")({target:"Object",stat:!0,forced:Object.assign!==e},{assign:e}),Date.prototype),D="Invalid Date",r="toString",J=e[r],W=e.getTime,e=(new Date(NaN)+""!=D&&require("../internals/redefine")(e,r,function(){var e=W.call(this);return e==e?J.call(this):D}),require("../internals/object-to-string")),r=Object.prototype,t=(e!==r.toString&&require("../internals/redefine")(r,"toString",e,{unsafe:!0}),"Promise"),Y=require("../internals/is-pure"),i=require("../internals/global"),r=require("../internals/export"),z=require("../internals/is-object"),Z=require("../internals/a-function"),H=require("../internals/an-instance"),e=require("../internals/classof-raw"),Q=require("../internals/iterate"),n=require("../internals/check-correctness-of-iteration"),X=require("../internals/species-constructor"),G=require("../internals/task").set,K=require("../internals/microtask"),V=require("../internals/promise-resolve"),ee=require("../internals/host-report-errors"),o=require("../internals/new-promise-capability"),re=require("../internals/perform"),te=require("../internals/user-agent"),ne=require("../internals/well-known-symbol")("species"),a=require("../internals/internal-state"),u=require("../internals/is-forced"),ie=a.get,oe=a.set,ae=a.getterFor(t),s=i[t],ue=i.TypeError,se=i.document,c=i.process,ce=i.fetch,a=c&&c.versions,le=a&&a.v8||"",l=o.f,fe=l,he="process"==e(c),pe=!!(se&&se.createEvent&&i.dispatchEvent),de="unhandledrejection",ve="rejectionhandled",ge=1,me=2,ye=1,qe=2,a=u(t,function(){function r(){}var e=s.resolve(1),t=(e.constructor={})[ne]=function(e){e(r,r)};return!((he||"function"==typeof PromiseRejectionEvent)&&(!Y||e.finally)&&e.then(r)instanceof t&&0!==le.indexOf("6.6")&&-1===te.indexOf("Chrome/66"))}),e=a||!n(function(e){s.all(e).catch(function(){})}),be=function(e){var r;return!(!z(e)||"function"!=typeof(r=e.then))&&r},we=function(f,h,p){var d;h.notified||(h.notified=!0,d=h.reactions,K(function(){for(var e=h.value,r=h.state==ge,t=0;d.length>t;){a=o=i=l=c=s=u=void 0;var n=d[t++],i,o,a,u=r?n.ok:n.fail,s=n.resolve,c=n.reject,l=n.domain;try{u?(r||(h.rejection===qe&&C(f,h),h.rejection=ye),!0===u?i=e:(l&&l.enter(),i=u(e),l&&(l.exit(),a=!0)),i===n.promise?c(ue("Promise-chain cycle")):(o=be(i))?o.call(i,s,c):s(i)):c(e)}catch(e){l&&!a&&l.exit(),c(e)}}h.reactions=[],h.notified=!1,p&&!h.rejection&&M(f,h)}))},je=function(e,r,t){var n;pe?((n=se.createEvent("Event")).promise=r,n.reason=t,n.initEvent(e,!1,!0),i.dispatchEvent(n)):n={promise:r,reason:t},(r=i["on"+e])?r(n):e===de&&ee("Unhandled promise rejection",t)},xe=function(e){return e.rejection!==ye&&!e.parent},f=function(r,t,n,i){return function(e){r(t,n,e,i)}},h=function(e,r,t,n){r.done||(r.done=!0,(r=n?n:r).value=t,r.state=me,we(e,r,!0))},ke=function(t,n,e,r){if(!n.done){n.done=!0,r&&(n=r);try{if(t===e)throw ue("Promise can't be resolved itself");var i=be(e);i?K(function(){var r={done:!1};try{i.call(e,f(ke,t,r,n),f(h,t,r,n))}catch(e){h(t,r,e,n)}}):(n.value=e,n.state=ge,we(t,n,!1))}catch(e){h(t,{done:!1},e,n)}}},u=(a&&(s=function(e){H(this,s,t),Z(e),F.call(this);var r=ie(this);try{e(f(ke,this,r),f(h,this,r))}catch(e){h(this,r,e)}},(F=function(e){oe(this,{type:t,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=require("../internals/redefine-all")(s.prototype,{then:function(e,r){var t=ae(this),n=l(X(this,s));return n.ok="function"!=typeof e||e,n.fail="function"==typeof r&&r,n.domain=he?c.domain:void 0,t.parent=!0,t.reactions.push(n),0!=t.state&&we(this,t,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),N=function(){var e=new F,r=ie(e);this.promise=e,this.resolve=f(ke,e,r),this.reject=f(h,e,r)},o.f=l=function(e){return e===s||e===$?new N:fe(e)},Y||"function"!=typeof ce||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return V(s,ce.apply(i,arguments))}})),r({global:!0,wrap:!0,forced:a},{Promise:s}),require("../internals/set-to-string-tag")(s,t,!1,!0),require("../internals/set-species")(t),$=require("../internals/path")[t],r({target:t,stat:!0,forced:a},{reject:function(e){var r=l(this);return r.reject.call(void 0,e),r.promise}}),r({target:t,stat:!0,forced:Y||a},{resolve:function(e){return V(Y&&this===$?s:this,e)}}),r({target:t,stat:!0,forced:e},{all:function(e){var a=this,r=l(a),u=r.resolve,s=r.reject,t=re(function(){var n=[],i=0,o=1;Q(e,function(e){var r=i++,t=!1;n.push(void 0),o++,a.resolve(e).then(function(e){t||(t=!0,n[r]=e,--o)||u(n)},s)}),--o||u(n)});return t.error&&s(t.value),r.promise},race:function(e){var r=this,t=l(r),n=t.reject,i=re(function(){Q(e,function(e){r.resolve(e).then(t.resolve,n)})});return i.error&&n(i.value),t.promise}}),require("../internals/regexp-exec")),Se=(require("../internals/export")({target:"RegExp",proto:!0,forced:/./.exec!==u},{exec:u}),require("../internals/an-object")),n=require("../internals/fails"),Re=require("../internals/regexp-flags"),Ae=require("../internals/descriptors"),o="toString",Oe=/./[o],a=n(function(){return"/a/b"!=Oe.call({source:"a",flags:"b"})}),r=Oe.name!=o,Le=((a||r)&&require("../internals/redefine")(RegExp.prototype,o,function(){var e=Se(this);return"/".concat(e.source,"/","flags"in e?e.flags:!Ae&&e instanceof RegExp?Re.call(e):void 0)},{unsafe:!0}),require("../internals/an-object")),Ee=require("../internals/to-object"),Ue=require("../internals/to-length"),Pe=require("../internals/to-integer"),Te=require("../internals/require-object-coercible"),Ie=require("../internals/advance-string-index"),Be=require("../internals/regexp-exec-abstract"),_e=Math.max,Me=Math.min,Ce=Math.floor,Fe=/\$([$&`']|\d\d?|<[^>]*>)/g,Ne=/\$([$&`']|\d\d?)/g,$e=(require("../internals/fix-regexp-well-known-symbol-logic")("replace",2,function(i,b,w){return[function(e,r){var t=Te(this),n=null==e?void 0:e[i];return void 0!==n?n.call(e,t,r):b.call(String(t),e,r)},function(e,r){var t=w(b,e,this,r);if(t.done)return t.value;for(var n,i=Le(e),o=String(this),a="function"==typeof r,u=(a||(r=String(r)),i.global),s=(u&&(n=i.unicode,i.lastIndex=0),[]);null!==(p=Be(i,o))&&(s.push(p),u);)""===String(p[0])&&(i.lastIndex=Ie(o,Ue(i.lastIndex),n));for(var c,l="",f=0,h=0;h<s.length;h++){for(var p=s[h],d=String(p[0]),v=_e(Me(Pe(p.index),o.length),0),g=[],m=1;m<p.length;m++)g.push(void 0===(c=p[m])?c:String(c));var y=p.groups,q=a?(q=[d].concat(g,v,o),void 0!==y&&q.push(y),String(r.apply(void 0,q))):function(o,a,u,s,c,e){var l=u+o.length,f=s.length,r=Ne;void 0!==c&&(c=Ee(c),r=Fe);return b.call(e,r,function(e,r){var t;switch(r.charAt(0)){case"$":return"$";case"&":return o;case"`":return a.slice(0,u);case"'":return a.slice(l);case"<":t=c[r.slice(1,-1)];break;default:var n,i=+r;if(0==i)return e;if(f<i)return 0!==(n=Ce(i/10))&&n<=f?void 0===s[n-1]?r.charAt(1):s[n-1]+r.charAt(1):e;t=s[i-1]}return void 0===t?"":t})}(d,o,v,g,y,r);f<=v&&(l+=o.slice(f,v)+q,f=v+d.length)}return l+o.slice(f)}]}),require("../internals/to-length")),De=require("../internals/validate-string-method-arguments"),Je="startsWith",e=require("../internals/correct-is-regexp-logic")(Je),We=""[Je];function Ye(){return(Ye=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t,n=arguments[r];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}require("../internals/export")({target:"String",proto:!0,forced:!e},{startsWith:function(e){var r=De(this,e,Je),t=$e(Math.min(1<arguments.length?arguments[1]:void 0,r.length)),e=String(e);return We?We.call(r,e,t):r.slice(t,t+e.length)===e}});var ze=function(n){return n=n||Object.create(null),{on:function(e,r){(n[e]||(n[e]=[])).push(r)},off:function(e,r){n[e]&&n[e].splice(n[e].indexOf(r)>>>0,1)},emit:function(r,t){(n[r]||[]).slice().map(function(e){e(t)}),(n["*"]||[]).slice().map(function(e){e(r,t)})}}},Ze=function(){var t=Object.create(null),o=ze(t);return Ye({},o,{off:function(e,r){e?o.off(e,r):Object.keys(t).forEach(function(e){delete t[e]})},once:function(n,i){o.on(n,function e(r,t){o.off(n,e),i(r,t)})}})},He={}.hasOwnProperty;function Qe(e,r){return He.call(r,e)}function Xe(){}function Ge(e){var r,t=!1;return function(){return t?r:(t=!0,r=e.apply(void 0,arguments))}}function Ke(){return(Ke=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t,n=arguments[r];for(t in n)!{}.hasOwnProperty.call(n,t)||(e[t]=n[t])}return e}).apply(null,arguments)}var Ve=function(r){return new Promise(function(e){e(r())})};function er(){return(er=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t,n=arguments[r];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}var rr=function(){var n,e={all:n=n||new Map,on:function(e,r){var t=n.get(e);t?t.push(r):n.set(e,[r])},off:function(e,r){var t=n.get(e);t&&(r?t.splice(t.indexOf(r)>>>0,1):n.set(e,[]))},emit:function(r,t){var e=n.get(r);e&&e.slice().map(function(e){e(t)}),(e=n.get("*"))&&e.slice().map(function(e){e(r,t)})}},t=e.all,o=function(e,r){if(null==e)return{};for(var t,n={},i=Object.keys(e),o=0;o<i.length;o++)t=i[o],0<=r.indexOf(t)||(n[t]=e[t]);return n}(e,["all"]);return er({},o,{off:function(e,r){e?o.off(e,r):t.clear()},once:function(n,i){o.on(n,function e(r,t){o.off(n,e),i(r,t)})}})},u="undefined"==typeof Element,tr=(u||(Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),u||Element.prototype.getRootNode,function(n){return function(r){return function(e,t){0===e&&r(0,function(e,r){t(e,1===e?n(r):r)})}}});var nr=function(a){return void 0===a&&(a={}),function(e){var t,r=a="function"==typeof a?{next:a}:a,n=r.next,i=r.error,o=r.complete;e(0,function(e,r){0===e&&(t=r),1===e&&n&&n(r),1!==e&&0!==e||t(1),2===e&&!r&&o&&o(),2===e&&r&&i&&i(r)});return function(){t&&t(2)}}};function ir(t){return new Promise(function(e,r){var u;nr({next:e,error:r,complete:function(){var e=new Error("No elements in sequence.");e.code="NO_ELEMENTS",r(e)}})((u=t,function(e,t){var n,i,o,a;0===e&&(i=n=!1,u(0,function(e,r){0===e?(o=r,t(0,function(e,r){2===e&&(i=!0),o(e,r)})):1===e?(n=!0,a=r,o(1)):2===e&&!r&&n&&(t(1,a),i)||t(e,r)}))}))})}var or=function(i){return function(r){return function(e,t){var n;0===e&&r(0,function(e,r){0===e?t(e,n=r):1!==e||i(r)?t(e,r):n(1)})}}},ar=function(n){return function(e){var t;e(0,function(e,r){0===e&&(t=r),1===e&&n(r),1!==e&&0!==e||t(1)})}},ur=function(r){var s,c=[];return function(e,a){var u;0===e&&(c.push(a),u=function(e,r){var t;2===e?(-1<(t=c.indexOf(a))&&c.splice(t,1),c.length||s(2)):s(e,r)},1===c.length?r(0,function(e,r){if(0===e)s=r,a(0,u);else for(var t,n=c.slice(0),i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){if(i){if(o>=n.length)break;t=n[o++]}else{if((o=n.next()).done)break;t=o.value}t(e,r)}2===e&&(c=[])}):a(0,u))}},sr=function(a){return function(r){return function(e,t){var n,i;function o(e,r){n<a&&i(e,r)}0===e&&r(n=0,function(e,r){0===e?(i=r,t(0,o)):1===e?n<a&&(n++,t(e,r),n===a)&&(t(2),i(2)):t(e,r)})}}};var cr="call",lr="emit",fr="@@livechat/postmessenger",hr="handshake",pr="response",dr=function(r){return function(e,n){var i,o,a;function u(e,r){1===e&&(a||o)(1,r),2===e&&(a&&a(2),o(2))}0===e&&(i=!1,r(0,function(e,r){var t;0===e?(o=r,n(0,u)):1===e?(t=r,a&&a(2),t(0,function(e,r){0===e?(a=r)(1):1===e?n(1,r):2===e&&r?(o(2),n(2,r)):2===e&&(i?n(2):(a=void 0,o(1)))})):2===e&&r?(a&&a(2),n(2,r)):2===e&&(a?i=!0:n(2))}))}},vr=function(n){return function(e,r){var t;0===e&&(t=!1,r(0,function(e){2===e&&(t=!0)}),r(1,n()),t||r(2))}},gr=function(e){return dr(vr(e))},mr=function(n){return function(e,r){var t;0===e&&(t=!1,r(0,function(e){2===e&&(t=!0)}),r(1,n()),t||r(2))}};function yr(n){return function(e,r){var t;0!==e||(t=!1,r(0,function(e){2===e&&(t=!0)}),t)||r(2,n||new Error)}}var qr=function(i,o,a){return function(e,r){var t,n;0!==e||(t=!1,n=function(e){r(1,e)},r(0,function(e){2===e&&(t=!0,i.removeEventListener(o,n,a))}),t)||i.addEventListener(o,n,a)}};function br(e){return!!e.data&&e.data[fr]}var wr=function(){for(var e=arguments.length,c=new Array(e),r=0;r<e;r++)c[r]=arguments[r];return function(e,n){if(0===e)for(var i=c.length,o=new Array(i),a=0,u=0,s=function(e){if(0!==e)for(var r=0;r<i;r++)o[r]&&o[r](e)},r=0;r<i;r++)!function(t){c[t](0,function(e,r){0===e?(o[t]=r,1==++a&&n(0,s)):2===e?(o[t]=void 0,++u===i&&n(2)):n(e,r)})}(r)}},jr=function(){return ur(or(function(){return"complete"===document.readyState})(wr(mr(Xe),qr(document,"readystatechange"))))},xr=Ge(function(){return ur(tr(function(e){return e.data.origin=e.origin,e.data})(or(br)(qr(window,"message"))))});function kr(r){return function(e){return dr(tr(r)(e))}}var Sr=0,Rr=function(e,r,t,n){return void 0===n&&(n=Sr++),gr(function(){return t.request=n,r(t),sr(1)(kr(function(e){var r,t;return e.data.error?(t=(r=e.data.result).real,r=r.error,t?(t=new Error(r.message),Qe("code",r)&&(t.code=r.code),yr(t)):yr(r)):mr(function(){return e.data.result})})(or(function(e){return e.type===pr&&e.request===n})(e)))})},Ar=function(e,i,o,a,r){return Ke({},e,{call:function(e){for(var r=arguments.length,t=new Array(1<r?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];return ir(Rr(i,a,o(cr,{method:e,args:t})))},emit:function(e,r){a(o(lr,{event:e,arg:r}))},data:r=void 0===r?null:r})},Or=function(e,r,t,n){var i={};return i[fr]=!0,i.owner=e,i.instance=r,i.type=t,i.data=n,i},Lr=function(n,i,o,a){return function(t){switch(t.type){case cr:return void Ve(function(){var e=t.data,r=e.method,e=e.args;return a[r].apply(n,e)}).then(function(e){t.type=pr,t.data={error:!1,result:e},o(t)},function(e){var r;t.type=pr,e instanceof Error?(r={real:!0,error:{message:e.message}},Qe("code",e)&&(r.error.code=e.code)):r={real:!1,error:e},t.data={error:!0,result:r},o(t)});case lr:var e=t.data,r=e.event,e=e.arg;return void i(r,e);default:return}}},Er=function(e){return t=function(e){return"function"==typeof e},n=e,Object.keys(n).reduce(function(e,r){return e[t(n[r])?0:1][r]=n[r],e},[{},{}]);var t,n};function Ur(f,e){void 0===f&&(f={});var e=(void 0===e?{}:e).handshakeTimeout,r=void 0===e?3e3:e,e=kr(function(){return sr(1)((u=r,function(r){return function(e,t){var n,i,o;function a(e){o=setTimeout(function(){i(2);var e=new Error("Timeout.");e.code="TIMEOUT",t(2,e)},e)}0===e&&(n=u instanceof Date,r(0,function(e,r){0===e?(i=r,a(n?u-Date.now():u),t(0,function(e,r){2===e&&clearTimeout(o),i(e,r)})):(2===e?clearTimeout(o):1!==e||n||(clearTimeout(o),a(u)),t(e,r))}))}}((i=50,function(r){return function(e,t){var n;0===e&&r(0,function(e,r){if(1===e||2===e&&void 0===r){if(!n&&2===e)return t(e,r);n&&clearTimeout(n),n=setTimeout(function(){t(e,r),n=void 0},i)}else t(e,r)})}}(or(function(e){return e.type===hr})(xr()))))));var i,u})(sr(1)(jr()));return{promise:ir(tr(function(e){function r(e){u.postMessage(e,i)}var t=e.instance,n=e.owner,i=e.origin,o=Er(f),a=o[0],o=o[1],u=window.parent,s=rr(),c=or(function(e){return e.owner===n})(xr()),l=Ar(s,c,function(e,r){return Or(n,t,e,r)},r,e.data),s=Lr(l,s.emit,r,a);return ar(s)(c),r(Ke({},e,{type:pr,data:{error:!1,result:o}})),l})(e))}}var Pr,Tr=require("../internals/array-includes")(!0),Ir=(require("../internals/export")({target:"Array",proto:!0},{includes:function(e){return Tr(this,e,1<arguments.length?arguments[1]:void 0)}}),require("../internals/add-to-unscopables")("includes"),require("../internals/to-indexed-object")),n=require("../internals/add-to-unscopables"),a=require("../internals/iterators"),r=require("../internals/internal-state"),o=require("../internals/define-iterator"),Br="Array Iterator",_r=r.set,Mr=r.getterFor(Br),Cr=(module.exports=o(Array,"Array",function(e,r){_r(this,{type:Br,target:Ir(e),index:0,kind:r})},function(){var e=Mr(this),r=e.target,t=e.kind,n=e.index++;return!r||n>=r.length?{value:e.target=void 0,done:!0}:"keys"==t?{value:n,done:!1}:"values"==t?{value:r[n],done:!1}:{value:[n,r[n]],done:!1}},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries"),require("../internals/to-indexed-object")),Fr=[].join,e=require("../internals/indexed-object")!=Object,u=require("../internals/sloppy-array-method")("join",","),Nr=(require("../internals/export")({target:"Array",proto:!0,forced:e||u},{join:function(e){return Fr.call(Cr(this),void 0===e?",":e)}}),require("../internals/is-object")),$r=require("../internals/is-array"),Dr=require("../internals/to-absolute-index"),Jr=require("../internals/to-length"),Wr=require("../internals/to-indexed-object"),Yr=require("../internals/create-property"),zr=require("../internals/well-known-symbol")("species"),Zr=[].slice,Hr=Math.max,r=require("../internals/array-method-has-species-support")("slice"),Qr=(require("../internals/export")({target:"Array",proto:!0,forced:!r},{slice:function(e,r){var t,n,i,o=Wr(this),a=Jr(o.length),u=Dr(e,a),s=Dr(void 0===r?a:r,a);if($r(o)&&((t="function"==typeof(t=o.constructor)&&(t===Array||$r(t.prototype))||Nr(t)&&null===(t=t[zr])?void 0:t)===Array||void 0===t))return Zr.call(o,u,s);for(n=new(void 0===t?Array:t)(Hr(s-u,0)),i=0;u<s;u++,i++)u in o&&Yr(n,i,o[u]);return n.length=i,n}}),require("../internals/string-at")),o=require("../internals/internal-state"),a=require("../internals/define-iterator"),Xr="String Iterator",Gr=o.set,Kr=o.getterFor(Xr),Vr=(a(String,"String",function(e){Gr(this,{type:Xr,string:String(e),index:0})},function(){var e=Kr(this),r=e.string,t=e.index;return t>=r.length?{value:void 0,done:!0}:(r=Qr(r,t,!0),e.index+=r.length,{value:r,done:!1})}),require("../internals/dom-iterables")),et=require("../modules/es.array.iterator"),rt=require("../internals/global"),tt=require("../internals/hide"),n=require("../internals/well-known-symbol"),nt=n("iterator"),it=n("toStringTag"),ot=et.values;for(Pr in Vr){var at=rt[Pr],p=at&&at.prototype;if(p){if(p[nt]!==ot)try{tt(p,nt,ot)}catch(e){p[nt]=ot}if(p[it]||tt(p,it,Pr),Vr[Pr])for(var d in et)if(p[d]!==et[d])try{tt(p,d,et[d])}catch(e){p[d]=et[d]}}}require("../modules/es.string.iterator");function ut(e){var r,t,n,i;if("number"==typeof e){for(r=[],t=0;t<4;t++)r.unshift(e%256),e=Math.floor(e/256);return r.join(".")}if("object"!=typeof e)return e;for(r="",n=Wt(e),t=0;t<8;t++)i&&0===e[t]||(i=i&&!1,n===t?(r+=t?":":"::",i=!0):(r+=e[t].toString(16),t<7&&(r+=":")));return"["+r+"]"}function st(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme}function v(e,r,t,n){var i,o,a,u=t||tn,s=0,c="",l=!1,f=!1,h=!1;for(t||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,r=r.replace(Ft,"")),r=r.replace(Nt,""),i=qt(r);s<=i.length;){switch(o=i[s],u){case tn:if(!o||!Et.test(o)){if(t)return At;u=on;continue}c+=o.toLowerCase(),u=nn;break;case nn:if(o&&(Ut.test(o)||"+"==o||"-"==o||"."==o))c+=o.toLowerCase();else{if(":"!=o){if(t)return At;c="",u=on,s=0;continue}if(t&&(j(e)!=yt(Qt,c)||"file"==c&&(Xt(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=c,t)return void(j(e)&&Qt[e.scheme]==e.port&&(e.port=null));c="","file"==e.scheme?u=gn:j(e)&&n&&n.scheme==e.scheme?u=an:j(e)?u=ln:"/"==i[s+1]?(u=un,s++):(e.cannotBeABaseURL=!0,e.path.push(""),u=bn)}break;case on:if(!n||n.cannotBeABaseURL&&"#"!=o)return At;if(n.cannotBeABaseURL&&"#"==o){e.scheme=n.scheme,e.path=n.path.slice(),e.query=n.query,e.fragment="",e.cannotBeABaseURL=!0,u=S;break}u="file"==n.scheme?gn:sn;continue;case an:if("/"!=o||"/"!=i[s+1]){u=sn;continue}u=fn,s++;break;case un:if("/"==o){u=hn;break}u=x;continue;case sn:if(e.scheme=n.scheme,o==q)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query;else if("/"==o||"\\"==o&&j(e))u=cn;else if("?"==o)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query="",u=k;else{if("#"!=o){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.path.pop(),u=x;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query,e.fragment="",u=S}break;case cn:if(!j(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,u=x;continue}u=hn}else u=fn;break;case ln:if(u=fn,"/"!=o||"/"!=c.charAt(s+1))continue;s++;break;case fn:if("/"==o||"\\"==o)break;u=hn;continue;case hn:if("@"==o){l&&(c="%40"+c);for(var l=!0,p=qt(c),d=0;d<p.length;d++){var v=p[d];":"!=v||h?(v=w(v,Ht),h?e.password+=v:e.username+=v):h=!0}c=""}else if(o==q||"/"==o||"?"==o||"#"==o||"\\"==o&&j(e)){if(l&&""==c)return Rt;s-=qt(c).length+1,c="",u=pn}else c+=o;break;case pn:case dn:if(t&&"file"==e.scheme){u=yn;continue}if(":"!=o||f){if(o==q||"/"==o||"?"==o||"#"==o||"\\"==o&&j(e)){if(j(e)&&""==c)return Ot;if(t&&""==c&&(Xt(e)||null!==e.port))return;if(a=$t(e,c))return a;if(c="",u=qn,t)return;continue}"["==o?f=!0:"]"==o&&(f=!1),c+=o}else{if(""==c)return Ot;if(a=$t(e,c))return a;if(c="",u=vn,t==dn)return}break;case vn:if(!Pt.test(o)){if(o==q||"/"==o||"?"==o||"#"==o||"\\"==o&&j(e)||t){if(""!=c){var g=parseInt(c,10);if(65535<g)return Lt;e.port=j(e)&&g===Qt[e.scheme]?null:g,c=""}if(t)return;u=qn;continue}return Lt}c+=o;break;case gn:if(e.scheme="file","/"==o||"\\"==o)u=mn;else{if(!n||"file"!=n.scheme){u=x;continue}if(o==q)e.host=n.host,e.path=n.path.slice(),e.query=n.query;else if("?"==o)e.host=n.host,e.path=n.path.slice(),e.query="",u=k;else{if("#"!=o){Kt(i.slice(s).join(""))||(e.host=n.host,e.path=n.path.slice(),Vt(e)),u=x;continue}e.host=n.host,e.path=n.path.slice(),e.query=n.query,e.fragment="",u=S}}break;case mn:if("/"==o||"\\"==o){u=yn;break}n&&"file"==n.scheme&&!Kt(i.slice(s).join(""))&&(Gt(n.path[0],!0)?e.path.push(n.path[0]):e.host=n.host),u=x;continue;case yn:if(o==q||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&Gt(c))u=x;else{if(""==c){if(e.host="",t)return}else{if(a=$t(e,c))return a;if("localhost"==e.host&&(e.host=""),t)return;c=""}u=qn}continue}c+=o;break;case qn:if(j(e)){if(u=x,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=q&&(u=x,"/"!=o))continue}else e.fragment="",u=S;else e.query="",u=k;break;case x:if(o==q||"/"==o||"\\"==o&&j(e)||!t&&("?"==o||"#"==o)){if(rn(c)?(Vt(e),"/"==o||"\\"==o&&j(e)||e.path.push("")):en(c)?"/"==o||"\\"==o&&j(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Gt(c)&&(e.host&&(e.host=""),c=c.charAt(0)+":"),e.path.push(c)),c="","file"==e.scheme&&(o==q||"?"==o||"#"==o))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",u=k):"#"==o&&(e.fragment="",u=S)}else c+=w(o,Zt);break;case bn:"?"==o?(e.query="",u=k):"#"==o?(e.fragment="",u=S):o!=q&&(e.path[0]+=w(o,Yt));break;case k:t||"#"!=o?o!=q&&("'"==o&&j(e)?e.query+="%27":e.query+="#"==o?"%23":w(o,Yt)):(e.fragment="",u=S);break;case S:o!=q&&(e.fragment+=w(o,zt))}s++}}function g(e){var r,t,n=mt(this,g,"URL"),i=1<arguments.length?arguments[1]:void 0,e=String(e),o=kt(n,{type:"URL"});if(void 0!==i)if(i instanceof g)r=b(i);else if(t=v(r={},String(i)))throw TypeError(t);if(t=v(o,e,null,r))throw TypeError(t);var a=o.searchParams=new jt;(i=xt(a)).updateSearchParams(o.query),i.updateURL=function(){o.query=String(a)||null},vt||(n.href=wn.call(n),n.origin=jn.call(n),n.protocol=xn.call(n),n.username=kn.call(n),n.password=Sn.call(n),n.host=Rn.call(n),n.hostname=An.call(n),n.port=On.call(n),n.pathname=Ln.call(n),n.search=En.call(n),n.searchParams=Un.call(n),n.hash=Pn.call(n))}function m(e,r){return{get:e,set:r,configurable:!0,enumerable:!0}}function ct(e){return Xn[e]}function lt(e){return encodeURIComponent(e).replace(Qn,ct)}function ft(e){this.entries.length=0,Gn(this.entries,e)}function y(e,r){if(e<r)throw TypeError("Not enough arguments")}function ht(){Tn(this,ht,Nn);var e,r,t,n,i,o,a=0<arguments.length?arguments[0]:void 0,u=[];if(Dn(this,{type:Nn,entries:u,updateURL:null,updateSearchParams:ft}),void 0!==a)if(Mn(a))if("function"==typeof(e=Fn(a)))for(r=e.call(a);!(t=r.next()).done;){if((n=(t=Cn(_n(t.value))).next()).done||(i=t.next()).done||!t.next().done)throw TypeError("Expected sequence with length 2");u.push({key:n.value+"",value:i.value+""})}else for(o in a)In(a,o)&&u.push({key:o,value:a[o]+""});else Gn(u,"string"==typeof a?"?"===a.charAt(0)?a.slice(1):a:a+"")}var q,pt,dt,vt=require("../internals/descriptors"),e=require("../internals/native-url"),gt=require("../internals/global").URL,u=require("../internals/object-define-properties"),r=require("../internals/redefine"),mt=require("../internals/an-instance"),yt=require("../internals/has"),o=require("../internals/object-assign"),qt=require("../internals/array-from"),bt=require("../internals/string-at"),wt=require("../internals/punycode-to-ascii"),a=require("../modules/web.url-search-params"),jt=a.URLSearchParams,xt=a.getState,n=require("../internals/internal-state"),kt=n.set,b=n.getterFor("URL"),St=Math.pow,Rt="Invalid authority",At="Invalid scheme",Ot="Invalid host",Lt="Invalid port",Et=/[a-zA-Z]/,Ut=/[a-zA-Z0-9+\-.]/,Pt=/\d/,Tt=/^(0x|0X)/,It=/^[0-7]+$/,Bt=/^\d+$/,_t=/^[0-9A-Fa-f]+$/,Mt=/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|\?|@|\[|\\|\]/,Ct=/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|\?|@|\[|\\|\]/,Ft=/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/g,Nt=/\u0009|\u000A|\u000D/g,$t=function(e,r){var t,n,i;if("["==r.charAt(0))return"]"==r.charAt(r.length-1)&&(t=Jt(r.slice(1,-1)))?void(e.host=t):Ot;if(j(e))return r=wt(r),Mt.test(r)||null===(t=Dt(r))?Ot:void(e.host=t);if(Ct.test(r))return Ot;for(t="",n=qt(r),i=0;i<n.length;i++)t+=w(n[i],Yt);e.host=t},Dt=function(e){var r,t,n,i,o,a,u,s=e.split(".");if(""==s[s.length-1]&&s.length&&s.pop(),4<(r=s.length))return e;for(t=[],n=0;n<r;n++){if(""==(i=s[n]))return e;if(o=10,1<i.length&&"0"==i.charAt(0)&&(o=Tt.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?Bt:8==o?It:_t).test(i))return e;a=parseInt(i,o)}t.push(a)}for(n=0;n<r;n++)if(a=t[n],n==r-1){if(a>=St(256,5-r))return null}else if(255<a)return null;for(u=t.pop(),n=0;n<t.length;n++)u+=t[n]*St(256,3-n);return u},Jt=function(e){function r(){return e.charAt(h)}var t,n,i,o,a,u,s,c=[0,0,0,0,0,0,0,0],l=0,f=null,h=0;if(":"==r()){if(":"!=e.charAt(1))return;h+=2,f=++l}for(;r();){if(8==l)return;if(":"==r()){if(null!==f)return;h++,f=++l}else{for(t=n=0;n<4&&_t.test(r());)t=16*t+parseInt(r(),16),h++,n++;if("."==r()){if(0==n)return;if(h-=n,6<l)return;for(i=0;r();){if(o=null,0<i){if(!("."==r()&&i<4))return;h++}if(!Pt.test(r()))return;for(;Pt.test(r());){if(a=parseInt(r(),10),null===o)o=a;else{if(0==o)return;o=10*o+a}if(255<o)return;h++}c[l]=256*c[l]+o,2!=++i&&4!=i||l++}if(4!=i)return;break}if(":"==r()){if(h++,!r())return}else if(r())return;c[l++]=t}}if(null!==f)for(u=l-f,l=7;0!=l&&0<u;)s=c[l],c[l--]=c[f+u-1],c[f+--u]=s;else if(8!=l)return;return c},Wt=function(e){for(var r=null,t=1,n=null,i=0,o=0;o<8;o++)0!==e[o]?(t<i&&(r=n,t=i),n=null,i=0):(null===n&&(n=o),++i);return t<i&&(r=n,t=i),r},Yt={},zt=o({},Yt,{" ":1,'"':1,"<":1,">":1,"`":1}),Zt=o({},zt,{"#":1,"?":1,"{":1,"}":1}),Ht=o({},Zt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),w=function(e,r){var t=bt(e,0);return 32<t&&t<127&&!yt(r,e)?e:encodeURIComponent(e)},Qt={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},j=function(e){return yt(Qt,e.scheme)},Xt=function(e){return""!=e.username||""!=e.password},Gt=function(e,r){return 2==e.length&&Et.test(e.charAt(0))&&(":"==(e=e.charAt(1))||!r&&"|"==e)},Kt=function(e){return 1<e.length&&Gt(e.slice(0,2))&&(2==e.length||"/"===(e=e.charAt(2))||"\\"===e||"?"===e||"#"===e)},Vt=function(e){var r=e.path,t=r.length;!t||"file"==e.scheme&&1==t&&Gt(r[0],!0)||r.pop()},en=function(e){return"."===e||"%2e"===e.toLowerCase()},rn=function(e){return".."===(e=e.toLowerCase())||"%2e."===e||".%2e"===e||"%2e%2e"===e},tn={},nn={},on={},an={},un={},sn={},cn={},ln={},fn={},hn={},pn={},dn={},vn={},gn={},mn={},yn={},qn={},x={},bn={},k={},S={},a=g.prototype,wn=function(){var e=b(this),r=e.scheme,t=e.username,n=e.password,i=e.host,o=e.port,a=e.path,u=e.query,s=e.fragment,c=r+":";return null!==i?(c+="//",Xt(e)&&(c+=t+(n?":"+n:"")+"@"),c+=ut(i),null!==o&&(c+=":"+o)):"file"==r&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==u&&(c+="?"+u),null!==s&&(c+="#"+s),c},jn=function(){var e=b(this),r=e.scheme,t=e.port;if("blob"==r)try{return new URL(r.path[0]).origin}catch(e){return"null"}return"file"!=r&&j(e)?r+"://"+ut(e.host)+(null!==t?":"+t:""):"null"},xn=function(){return b(this).scheme+":"},kn=function(){return b(this).username},Sn=function(){return b(this).password},Rn=function(){var e=b(this),r=e.host,e=e.port;return null===r?"":null===e?ut(r):ut(r)+":"+e},An=function(){var e=b(this).host;return null===e?"":ut(e)},On=function(){var e=b(this).port;return null===e?"":String(e)},Ln=function(){var e=b(this),r=e.path;return e.cannotBeABaseURL?r[0]:r.length?"/"+r.join("/"):""},En=function(){var e=b(this).query;return e?"?"+e:""},Un=function(){return b(this).searchParams},Pn=function(){var e=b(this).fragment;return e?"#"+e:""},n=(vt&&u(a,{href:m(wn,function(e){var r=b(this),e=String(e),e=v(r,e);if(e)throw TypeError(e);xt(r.searchParams).updateSearchParams(r.query)}),origin:m(jn),protocol:m(xn,function(e){var r=b(this);v(r,String(e)+":",tn)}),username:m(kn,function(e){var r=b(this),t=qt(String(e));if(!st(r)){r.username="";for(var n=0;n<t.length;n++)r.username+=w(t[n],Ht)}}),password:m(Sn,function(e){var r=b(this),t=qt(String(e));if(!st(r)){r.password="";for(var n=0;n<t.length;n++)r.password+=w(t[n],Ht)}}),host:m(Rn,function(e){var r=b(this);r.cannotBeABaseURL||v(r,String(e),pn)}),hostname:m(An,function(e){var r=b(this);r.cannotBeABaseURL||v(r,String(e),dn)}),port:m(On,function(e){var r=b(this);st(r)||(""==(e=String(e))?r.port=null:v(r,e,vn))}),pathname:m(Ln,function(e){var r=b(this);r.cannotBeABaseURL||(r.path=[],v(r,e+"",qn))}),search:m(En,function(e){var r=b(this);""==(e=String(e))?r.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),r.query="",v(r,e,k)),xt(r.searchParams).updateSearchParams(r.query)}),searchParams:m(Un),hash:m(Pn,function(e){var r=b(this);""==(e=String(e))?r.fragment=null:("#"==e.charAt(0)&&(e=e.slice(1)),r.fragment="",v(r,e,S))})}),r(a,"toJSON",function(){return wn.call(this)},{enumerable:!0}),r(a,"toString",function(){return wn.call(this)},{enumerable:!0}),gt&&(pt=gt.createObjectURL,dt=gt.revokeObjectURL,pt&&r(g,"createObjectURL",function(e){return pt.apply(gt,arguments)}),dt)&&r(g,"revokeObjectURL",function(e){return dt.apply(gt,arguments)}),require("../internals/set-to-string-tag")(g,"URL"),require("../internals/export")({global:!0,forced:!e,sham:!vt},{URL:g}),require("../internals/export")({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}}),require("../modules/es.array.iterator"),require("../internals/native-url")),o=require("../internals/redefine"),u=require("../internals/redefine-all"),a=require("../internals/create-iterator-constructor"),r=require("../internals/internal-state"),Tn=require("../internals/an-instance"),In=require("../internals/has"),Bn=require("../internals/bind-context"),_n=require("../internals/an-object"),Mn=require("../internals/is-object"),Cn=require("../internals/get-iterator"),Fn=require("../internals/get-iterator-method"),e=require("../internals/well-known-symbol")("iterator"),Nn="URLSearchParams",$n=Nn+"Iterator",Dn=r.set,R=r.getterFor(Nn),Jn=r.getterFor($n),Wn=/\+/g,Yn=Array(4),zn=function(e){return Yn[e-1]||(Yn[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},Zn=function(r){try{return decodeURIComponent(r)}catch(e){return r}},Hn=function(e){for(var r=e.replace(Wn," "),t=4;t;)r=r.replace(zn(t--),Zn);return r},Qn=/[!'()~]|%20/g,Xn={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Gn=function(e,r){if(r)for(var t,n=r.split("&"),i=0;i<n.length;)(t=n[i++]).length&&(t=t.split("="),e.push({key:Hn(t.shift()),value:Hn(t.join("="))}));return e},Kn=a(function(e,r){Dn(this,{type:$n,iterator:Cn(R(e).entries),kind:r})},"Iterator",function(){var e=Jn(this),r=e.kind,e=e.iterator.next(),t=e.value;return e.done||(e.value="keys"===r?t.key:"values"===r?t.value:[t.key,t.value]),e}),r=ht.prototype,Vn=(u(r,{append:function(e,r){y(arguments.length,2);var t=R(this);t.entries.push({key:e+"",value:r+""}),t.updateURL&&t.updateURL()},delete:function(e){y(arguments.length,1);for(var r=R(this),t=r.entries,n=e+"",i=0;i<t.length;)t[i].key===n?t.splice(i,1):i++;r.updateURL&&r.updateURL()},get:function(e){y(arguments.length,1);for(var r=R(this).entries,t=e+"",n=0;n<r.length;n++)if(r[n].key===t)return r[n].value;return null},getAll:function(e){y(arguments.length,1);for(var r=R(this).entries,t=e+"",n=[],i=0;i<r.length;i++)r[i].key===t&&n.push(r[i].value);return n},has:function(e){y(arguments.length,1);for(var r=R(this).entries,t=e+"",n=0;n<r.length;)if(r[n++].key===t)return!0;return!1},set:function(e,r){y(arguments.length,1);for(var t,n=R(this),i=n.entries,o=!1,a=e+"",u=r+"",s=0;s<i.length;s++)(t=i[s]).key===a&&(o?i.splice(s--,1):(o=!0,t.value=u));o||i.push({key:a,value:u}),n.updateURL&&n.updateURL()},sort:function(){for(var e,r,t=R(this),n=t.entries,i=n.slice(),o=n.length=0;o<i.length;o++){for(e=i[o],r=0;r<o;r++)if(n[r].key>e.key){n.splice(r,0,e);break}r===o&&n.push(e)}t.updateURL&&t.updateURL()},forEach:function(e){for(var r,t=R(this).entries,n=Bn(e,1<arguments.length?arguments[1]:void 0,3),i=0;i<t.length;)n((r=t[i++]).value,r.key,this)},keys:function(){return new Kn(this,"keys")},values:function(){return new Kn(this,"values")},entries:function(){return new Kn(this,"entries")}},{enumerable:!0}),o(r,e,r.entries),o(r,"toString",function(){for(var e,r=R(this).entries,t=[],n=0;n<r.length;)e=r[n++],t.push(lt(e.key)+"="+lt(e.value));return t.join("&")},{enumerable:!0}),require("../internals/set-to-string-tag")(ht,Nn),require("../internals/export")({global:!0,forced:!n},{URLSearchParams:ht}),module.exports={URLSearchParams:ht,getState:R},["livechatinc.com","livechat.com","my.lc:3000","legacy.lc:3001"]);function ei(){var r=function(e){};return window.addEventListener("message",function(e){!function(e){if(!e)return!1;try{var r=new URL(e),t=r.hostname.split("."),n=t.slice(t.length-2).join("."),i=r.port?n+":"+r.port:n;return Vn.includes(i)}catch(e){return!1}}(e.origin)||r(e.data)}),{listen:function(e){r=e},send:function(e){return parent.postMessage(e,"*"),Promise.resolve()}}}function ri(){var t=function(e){};return Ur({handle:function(e){t(e)}}).promise.then(function(r){return{listen:function(e){t=e},send:function(e){return r.call("handle",e).then(function(){})}}})}var ti=require("../internals/array-methods")(1),a=require("../internals/array-method-has-species-support")("map"),ni=(require("../internals/export")({target:"Array",proto:!0,forced:!a},{map:function(e){return ti(this,e,arguments[1])}}),require("../internals/array-reduce")),u=require("../internals/sloppy-array-method")("reduce"),ii=(require("../internals/export")({target:"Array",proto:!0,forced:u},{reduce:function(e){return ni(this,e,arguments.length,arguments[1],!1)}}),require("../internals/an-object")),oi=require("../internals/require-object-coercible"),ai=require("../internals/same-value"),ui=require("../internals/regexp-exec-abstract");function si(e){var r=location.search.replace(/^\?/,"").split("&").map(function(e){return e.split("=").map(decodeURIComponent)}).reduce(function(e,r){var t=r[0],r=r[1];return e[t]=r,e},{});return void 0!==r[e]?r[e]:null}require("../internals/fix-regexp-well-known-symbol-logic")("search",1,function(n,i,o){return[function(e){var r=oi(this),t=null==e?void 0:e[n];return void 0!==t?t.call(e,r):new RegExp(e)[n](String(r))},function(e){var r,t=o(i,e,this);return t.done?t.value:(t=ii(e),e=String(this),r=t.lastIndex,ai(r,0)||(t.lastIndex=0),e=ui(t,e),ai(t.lastIndex,r)||(t.lastIndex=r),null===e?-1:e.index)}]});var ci="livechat:";function li(t,n){var i=Ze();return t.listen(function(e){var r;e&&e.event_name&&(r=e.event_name.toString(),e=e.event_data,r.startsWith(ci))&&i.emit(r.replace(ci,""),e)}),{emitter:i,sendMessage:function(e,r){return t.send({plugin_id:n,message:e,data:r=void 0===r?null:r})}}}function fi(e,r){var t=P[e]=Ui(E[U]);return Ni(t,{type:Fi,tag:e,description:r}),mi||(t.description=r),t}function hi(e,r){Ri(e);for(var t,n=ki(r=Oi(r)),i=0,o=n.length;i<o;)Ki(e,t=n[i++],r[t]);return e}function pi(e){var r=zi.call(this,e=Li(e,!0));return!(this===T&&A(P,e)&&!A(Hi,e))&&(!(r||!A(this,e)||!A(P,e)||A(this,O)&&this[O][e])||r)}function di(e,r){var t;if(e=Oi(e),r=Li(r,!0),e!==T||!A(P,r)||A(Hi,r))return!(t=Di(e,r))||!A(P,r)||A(e,O)&&e[O][r]||(t.enumerable=!0),t}function vi(e){for(var r,t=Ji(Oi(e)),n=[],i=0;t.length>i;)A(P,r=t[i++])||A(yi,r)||n.push(r);return n}function gi(e){for(var r,t=e===T,n=Ji(t?Hi:Oi(e)),i=[],o=0;n.length>o;)!A(P,r=n[o++])||t&&!A(T,r)||i.push(P[r]);return i}var e=require("../internals/global"),A=require("../internals/has"),mi=require("../internals/descriptors"),o=require("../internals/is-pure"),r=require("../internals/export"),n=require("../internals/redefine"),yi=require("../internals/hidden-keys"),a=require("../internals/fails"),u=require("../internals/shared"),qi=require("../internals/set-to-string-tag"),bi=require("../internals/uid"),wi=require("../internals/well-known-symbol"),ji=require("../internals/wrapped-well-known-symbol"),xi=require("../internals/define-well-known-symbol"),ki=require("../internals/enum-keys"),Si=require("../internals/is-array"),Ri=require("../internals/an-object"),Ai=require("../internals/is-object"),Oi=require("../internals/to-indexed-object"),Li=require("../internals/to-primitive"),Ei=require("../internals/create-property-descriptor"),Ui=require("../internals/object-create"),Pi=require("../internals/object-get-own-property-names-external"),Ti=require("../internals/object-get-own-property-descriptor"),Ii=require("../internals/object-define-property"),Bi=require("../internals/object-property-is-enumerable"),_i=require("../internals/hide"),Mi=require("../internals/object-keys"),O=require("../internals/shared-key")("hidden"),Ci=require("../internals/internal-state"),Fi="Symbol",Ni=Ci.set,$i=Ci.getterFor(Fi),Di=Ti.f,L=Ii.f,Ji=Pi.f,E=e.Symbol,Wi=e.JSON,Yi=Wi&&Wi.stringify,U="prototype",Ci=wi("toPrimitive"),zi=Bi.f,Zi=u("symbol-registry"),P=u("symbols"),Hi=u("op-symbols"),u=u("wks"),T=Object[U],e=e.QObject,I=require("../internals/native-symbol"),Qi=!e||!e[U]||!e[U].findChild,Xi=mi&&a(function(){return 7!=Ui(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(e,r,t){var n=Di(T,r);n&&delete T[r],L(e,r,t),n&&e!==T&&L(T,r,n)}:L,Gi=I&&"symbol"==typeof E.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof E},Ki=function(e,r,t){return e===T&&Ki(Hi,r,t),Ri(e),r=Li(r,!0),Ri(t),(A(P,r)?(t.enumerable?(A(e,O)&&e[O][r]&&(e[O][r]=!1),t=Ui(t,{enumerable:Ei(0,!1)})):(A(e,O)||L(e,O,Ei(1,{})),e[O][r]=!0),Xi):L)(e,r,t)};I||(n((E=function(){if(this instanceof E)throw TypeError("Symbol is not a constructor");var e=void 0===arguments[0]?void 0:String(arguments[0]),r=bi(e),t=function(e){this===T&&t.call(Hi,e),A(this,O)&&A(this[O],r)&&(this[O][r]=!1),Xi(this,r,Ei(1,e))};return mi&&Qi&&Xi(T,r,{configurable:!0,set:t}),fi(r,e)})[U],"toString",function(){return $i(this).tag}),Bi.f=pi,Ii.f=Ki,Ti.f=di,require("../internals/object-get-own-property-names").f=Pi.f=vi,require("../internals/object-get-own-property-symbols").f=gi,mi&&(L(E[U],"description",{configurable:!0,get:function(){return $i(this).description}}),o||n(T,"propertyIsEnumerable",pi,{unsafe:!0})),ji.f=function(e){return fi(wi(e),e)}),r({global:!0,wrap:!0,forced:!I,sham:!I},{Symbol:E});for(var Vi=Mi(u),eo=0;Vi.length>eo;)xi(Vi[eo++]);r({target:Fi,stat:!0,forced:!I},{for:function(e){return A(Zi,e+="")?Zi[e]:Zi[e]=E(e)},keyFor:function(e){if(!Gi(e))throw TypeError(e+" is not a symbol");for(var r in Zi)if(Zi[r]===e)return r},useSetter:function(){Qi=!0},useSimple:function(){Qi=!1}}),r({target:"Object",stat:!0,forced:!I,sham:!mi},{create:function(e,r){return void 0===r?Ui(e):hi(Ui(e),r)},defineProperty:Ki,defineProperties:hi,getOwnPropertyDescriptor:di}),r({target:"Object",stat:!0,forced:!I},{getOwnPropertyNames:vi,getOwnPropertySymbols:gi}),Wi&&r({target:"JSON",stat:!0,forced:!I||a(function(){var e=E();return"[null]"!=Yi([e])||"{}"!=Yi({a:e})||"{}"!=Yi(Object(e))})},{stringify:function(e){for(var r,t,n=[e],i=1;i<arguments.length;)n.push(arguments[i++]);if(t=r=n[1],(Ai(r)||void 0!==e)&&!Gi(e))return Si(r)||(r=function(e,r){if("function"==typeof t&&(r=t.call(this,e,r)),!Gi(r))return r}),n[1]=r,Yi.apply(Wi,n)}}),E[U][Ci]||_i(E[U],Ci,E[U].valueOf),qi(E,Fi),yi[O]=!0;var ro,to,no,io,oo,ao,uo,e=require("../internals/descriptors"),so=require("../internals/has"),co=require("../internals/is-object"),Bi=require("../internals/object-define-property").f,Ii=require("../internals/copy-constructor-properties"),B=require("../internals/global").Symbol,Pi=(!e||"function"!=typeof B||"description"in B.prototype&&void 0===B().description||(ro={},Ii(to=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),r=this instanceof to?new B(e):void 0===e?B():B(e);return""===e&&(ro[r]=!0),r},B),(Ti=to.prototype=B.prototype).constructor=to,no=Ti.toString,io="Symbol(test)"==String(B("test")),oo=/^Symbol\((.*)\)[^)]+$/,Bi(Ti,"description",{configurable:!0,get:function(){var e=co(this)?this.valueOf():this,r=no.call(e);return so(ro,e)?"":""===(e=io?r.slice(7,-1):r.replace(oo,"$1"))?void 0:e}}),require("../internals/export")({global:!0,forced:!0},{Symbol:to})),require("../internals/descriptors")),o=require("../internals/object-define-property").f,n=Function.prototype,lo=n.toString,fo=/^\s*function ([^ (]*)/,ho=(!Pi||"name"in n||o(n,"name",{configurable:!0,get:function(){try{return lo.call(this).match(fo)[1]}catch(e){return""}}}),(ji=ao=ao||{}).DirectCharge="direct_charge",ji.RecurrentCharge="recurrent_charge",(Mi=uo=uo||{}).RegisterTransactionPending="register_transaction_pending",Mi.RegisterTransactionSuccess="register_transaction_success",Mi.RegisterTransactionFailure="register_transaction_failure",function(e){return void 0!==e.months?ao.RecurrentCharge:ao.DirectCharge});_.createConnection=function(){var r=si("plugin_id");return("plain"===si("connection")?Promise.resolve(ei()):ri()).then(function(e){return li(e,r)})},_.createWidget=function(t,e){return Object.assign({},e,{on:t.emitter.on,off:t.emitter.off,sendMessage:function(e,r){return t.sendMessage(e,r=void 0===r?null:r)}})},_.withAmplitude=function(t){return Object.assign({},t,{trackEvent:function(e,r){if("string"!=typeof e||"object"!=typeof r)throw new Error("You have to specify the event name and its properties");return t.sendMessage("track",{event_name:e,event_properties:r})}})},_.withPayments=function(a){return Object.assign({},a,{startTransaction:function(e,r){try{if(!e)throw new Error("You have to provide charge details");if(!r||!r.icon)throw new Error("You have to provide metadata with icon");i=r,o=ho(n=e),i={name:n.name,price:n.price,per_account:n.per_account,test:n.test,return_url:null,metadata:{type:o,isExternalTransaction:!0,icon:i.icon,description:i.description,showBillingCyclePicker:i.showBillingCyclePicker}};var t=o===ao.RecurrentCharge?Object.assign({},i,{months:n.months,trial_days:n.trial_days}):Object.assign({},i,{quantity:n.quantity});a.sendMessage(uo.RegisterTransactionPending,{paymentIntent:t}),a.sendMessage(uo.RegisterTransactionSuccess,{charge:e})}catch(e){throw a.sendMessage(uo.RegisterTransactionFailure,{error:e}),e}var n,i,o}})},Object.defineProperty(_,"__esModule",{value:!0})});
